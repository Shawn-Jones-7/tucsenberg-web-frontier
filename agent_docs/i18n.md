# Internationalization (i18n)

## Framework

- **Library**: next-intl
- **Locales**: `en` (English), `zh` (Chinese)
- **Default**: `en`

## Translation Files

```
messages/
├── en/
│   ├── critical.json    # Above-the-fold, SEO-critical
│   └── deferred.json    # Below-the-fold, lazy-loaded
├── zh/
│   ├── critical.json
│   └── deferred.json
├── en.json              # Vitest mocks only (DO NOT USE IN PROD)
└── zh.json              # Vitest mocks only (DO NOT USE IN PROD)
```

### Critical vs Deferred
- **critical.json**: Navigation, header, footer, SEO metadata, error messages
- **deferred.json**: Page-specific content (about, products, blog, etc.)

## Using Translations

### In Server Components
```typescript
import { getTranslations } from 'next-intl/server';

export default async function Page({ params }: PageProps) {
  const { locale } = await params;
  const t = await getTranslations({ locale, namespace: 'products' });

  return <h1>{t('pageTitle')}</h1>;
}
```

### In Client Components
```typescript
'use client';
import { useTranslations } from 'next-intl';

export function ProductCard() {
  const t = useTranslations('products.card');
  return <span>{t('moq')}</span>;
}
```

## Adding New Translations

1. Add keys to both `en/` and `zh/` files
2. Keep structure identical across locales
3. Run `pnpm i18n:check` to validate sync
4. Use nested keys for organization: `namespace.section.key`

## Key Files

| File | Purpose |
|------|---------|
| `src/i18n/request.ts` | Message loading (critical + deferred) |
| `src/i18n/routing.ts` | Locale config, pathnames |
| `src/lib/load-messages.ts` | Message loader utilities |
