{
  "tasks": [
    {
      "id": "63c1cf87-c712-41f4-a048-c1d88c5d0aeb",
      "name": "盤點測試 mock 現狀與差異",
      "description": "梳理 test-utils.ts、src/test/utils.tsx 以及各測試文件的本地 mock，列出消息/導航 key 差異與覆蓋情況，確認哪些可以集中化、哪些需保留局部覆寫。輸出盤點清單供後續改造參考。",
      "status": "pending",
      "dependencies": [],
      "createdAt": "2025-11-26T13:21:49.556Z",
      "updatedAt": "2025-11-26T13:21:49.556Z",
      "relatedFiles": [
        {
          "path": "test-utils.ts",
          "type": "REFERENCE",
          "description": "根目錄簡易 mock 工具"
        },
        {
          "path": "src/test/utils.tsx",
          "type": "REFERENCE",
          "description": "完整 renderWithIntl 工具"
        },
        {
          "path": "tests",
          "type": "REFERENCE",
          "description": "測試文件內局部 mock 搜索"
        }
      ],
      "implementationGuide": "1) 搜索 test-utils.ts、src/test/utils.tsx 以及 tests/** 中的自定義 mock；2) 列出 navigation/seo/其他命名空間的 key 列表與重疊/缺失；3) 確認哪些測試需要特殊 mock，標記不可合併；4) 產出盤點文檔或簡表。",
      "verificationCriteria": "提供盤點結果（文件/表格），包含：集中可合併的命名空間列表、必須保留局部覆蓋的場景、缺失/重疊的 key。",
      "analysisResult": "集中管理測試 mock，統一 renderWithIntl 等工具的默認消息來源，減少重複和缺漏。"
    },
    {
      "id": "cb832325-6fc4-42d4-917f-5f4ac23076c5",
      "name": "建立集中 mock 常量",
      "description": "在 src/test/constants/mock-messages.ts 按命名空間導出 mock（如 navigation、seo 等），並提供合併的 combinedMessages；確保對象可分拆引用以減少載入。",
      "status": "pending",
      "dependencies": [
        {
          "taskId": "63c1cf87-c712-41f4-a048-c1d88c5d0aeb"
        }
      ],
      "createdAt": "2025-11-26T13:21:49.556Z",
      "updatedAt": "2025-11-26T13:21:49.556Z",
      "relatedFiles": [
        {
          "path": "src/test/constants/mock-messages.ts",
          "type": "CREATE",
          "description": "集中 mock 常量文件"
        },
        {
          "path": "messages/en/critical.json",
          "type": "REFERENCE",
          "description": "英語消息源參考"
        },
        {
          "path": "messages/zh/critical.json",
          "type": "REFERENCE",
          "description": "中文消息源參考"
        }
      ],
      "implementationGuide": "1) 新建 src/test/constants/mock-messages.ts；2) 拆分導出各命名空間常量 + 默認合併對象；3) 確保類型對齊 next-intl 消息結構，避免 any；4) 若有導航 mock，一併集中。",
      "verificationCriteria": "存在集中 mock 文件，包含分命名空間導出與 combinedMessages，類型正確，無 ESLint/TS 錯誤。",
      "analysisResult": "集中管理測試 mock，統一 renderWithIntl 等工具的默認消息來源，減少重複和缺漏。"
    },
    {
      "id": "ace45b3a-1629-4a4a-b97b-e10a815ffe3a",
      "name": "整合測試工具入口到統一 mock",
      "description": "更新 src/test/utils.tsx 使 renderWithIntl 等默認使用集中 mock，支持 partial 覆寫；調整 createMockTranslations 使用集中源；處理 test-utils.ts（根目錄）為輕量重導或標註棄用。",
      "status": "pending",
      "dependencies": [
        {
          "taskId": "cb832325-6fc4-42d4-917f-5f4ac23076c5"
        }
      ],
      "createdAt": "2025-11-26T13:21:49.556Z",
      "updatedAt": "2025-11-26T13:21:49.556Z",
      "relatedFiles": [
        {
          "path": "src/test/utils.tsx",
          "type": "TO_MODIFY",
          "description": "測試渲染工具"
        },
        {
          "path": "test-utils.ts",
          "type": "TO_MODIFY",
          "description": "根目錄簡易工具需重導/棄用"
        }
      ],
      "implementationGuide": "1) 在 src/test/utils.tsx 引入集中 mock，默認合併並允許 partialMessages；2) createMockTranslations 從集中源生成；3) 如需深合併，使用現有 util 或添加小型合併函數；4) test-utils.ts 視情況重導至 src/test/utils.tsx 或保留 deprecated 標註。",
      "verificationCriteria": "renderWithIntl 默認載入集中 mock 並可覆寫；createMockTranslations 依賴集中源；test-utils.ts 已處理重導/棄用；TS/ESLint 通過。",
      "analysisResult": "集中管理測試 mock，統一 renderWithIntl 等工具的默認消息來源，減少重複和缺漏。"
    },
    {
      "id": "10039858-e369-454d-9013-045d25e63a35",
      "name": "遷移測試引用並清理局部 mock",
      "description": "全局替換測試文件對本地 mock 的引用，改用集中 mock 或其子集；保留確需特別覆寫的場景並記錄；確保路徑更新後測試可運行。",
      "status": "pending",
      "dependencies": [
        {
          "taskId": "ace45b3a-1629-4a4a-b97b-e10a815ffe3a"
        }
      ],
      "createdAt": "2025-11-26T13:21:49.556Z",
      "updatedAt": "2025-11-26T13:21:49.556Z",
      "relatedFiles": [
        {
          "path": "tests",
          "type": "TO_MODIFY",
          "description": "測試文件需更新導入"
        },
        {
          "path": "src/test/constants/mock-messages.ts",
          "type": "REFERENCE",
          "description": "集中 mock 來源"
        },
        {
          "path": "src/test/utils.tsx",
          "type": "REFERENCE",
          "description": "統一工具入口"
        }
      ],
      "implementationGuide": "1) 搜索 tests/** 中對 navigation/messages 等本地 mock 的導入；2) 替換為集中 mock 或從集中 mock 拆分子集；3) 保留特殊覆寫並在文件內註明原因；4) 確認 import 路徑統一。",
      "verificationCriteria": "測試文件導入統一路徑；僅保留必要的局部覆寫並有說明；抽樣運行關鍵測試無路徑/類型錯誤。",
      "analysisResult": "集中管理測試 mock，統一 renderWithIntl 等工具的默認消息來源，減少重複和缺漏。"
    },
    {
      "id": "c78a7ae9-5734-4ff4-bf75-3f635b11e47a",
      "name": "使用說明與驗證",
      "description": "補充測試工具使用說明（集中 mock 的導入方式、覆寫示例），並列出驗證步驟（lint/type-check/關鍵測試命令）；更新相關 README 或在 src/test/utils.tsx 添加說明。",
      "status": "pending",
      "dependencies": [
        {
          "taskId": "10039858-e369-454d-9013-045d25e63a35"
        }
      ],
      "createdAt": "2025-11-26T13:21:49.556Z",
      "updatedAt": "2025-11-26T13:21:49.556Z",
      "relatedFiles": [
        {
          "path": "src/test/utils.tsx",
          "type": "REFERENCE",
          "description": "添加說明/示例"
        },
        {
          "path": "src/test/constants/mock-messages.ts",
          "type": "REFERENCE",
          "description": "集中 mock 說明"
        },
        {
          "path": "docs",
          "type": "REFERENCE",
          "description": "若有測試文檔需更新"
        }
      ],
      "implementationGuide": "1) 在現有測試說明文件或 utils 頂部添加簡短說明與示例；2) 說明如何按需覆寫 partialMessages；3) 列出推薦驗證命令；4) 如無專門文檔，可在 src/test/README.md 或 utils 頂部註釋補充。",
      "verificationCriteria": "存在可見的使用說明（文檔或頂部註釋）；示例涵蓋默認使用與覆寫；列出驗證命令；無 lint/TS 錯誤。",
      "analysisResult": "集中管理測試 mock，統一 renderWithIntl 等工具的默認消息來源，減少重複和缺漏。"
    }
  ]
}